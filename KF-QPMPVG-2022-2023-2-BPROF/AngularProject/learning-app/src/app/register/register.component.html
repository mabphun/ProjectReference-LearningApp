<h1>Register</h1>

<div *ngIf="show" [ngClass]="alertColor" class="alert alert-dismissible fade show" role="alert">
    {{alertMessage}}
    <button type="button" (click)="alertClosed()" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

<div class="input-group mb-3 flex-nowrap">
    <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-user"></i></span>
    <input 
    type="text" 
    class="form-control form-control-lg" 
    id="username" 
    placeholder="Username"
    [(ngModel)]="this.registerModel.username"
    minlength="5" required #username="ngModel"
    >
</div>
<div *ngIf="username.touched && username.invalid" class="alert alert-danger mb-3">
    <div *ngIf="username.hasError('required')">
      Name is required
    </div>

    <div *ngIf="username.hasError('minlength')">
      Name must be at least 5 characters long
    </div>
</div>

<div class="input-group mb-3 flex-nowrap">
    <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-at"></i></span>
    <input 
    type="email" 
    class="form-control form-control-lg" 
    id="email" 
    placeholder="example@email.com"
    [(ngModel)]="this.registerModel.email"
    email="true" required #email="ngModel"
    >
</div>
<div *ngIf="email.touched && email.invalid" class="alert alert-danger mb-3">
    <div *ngIf="email.hasError('required')">
      Email is required
    </div>

    <div *ngIf="email.hasError('email')">
        Email address is not valid
    </div>
</div>

<div class="input-group mb-3 flex-nowrap">
    <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-image"></i></span>
    <input 
    type="url" 
    class="form-control form-control-lg" 
    id="image" 
    placeholder="Image link (Optional)"
    [(ngModel)]="this.registerModel.image"
    >
</div>

<div class="input-group mb-3 flex-nowrap">
    <span class="input-group-text" id="addon-wrapping"><i class="fa-solid fa-key"></i></span>
    <input 
    type="password" 
    class="form-control form-control-lg" 
    id="password" 
    placeholder="Password"
    [(ngModel)]="this.registerModel.password"
    minlength="8" required #password="ngModel"
    >
</div>

<div *ngIf="password.touched && password.invalid" class="alert alert-danger mb-3">
    <div *ngIf="password.hasError('required')">
      Password is required
    </div>

    <div *ngIf="password.hasError('minlength')">
        Password must be at least 8 characters long
    </div>
</div>

<div class="form-check mb-3">
    <input [(ngModel)]="this.acceptTermsAndConditions" class="form-check-input" type="checkbox" value="" id="terms">
    <label class="form-check-label" for="terms">
      Accept terms and conditions
    </label>
  </div>

<div class="d-grid gap-2">
    <button 
    class="btn btn-primary btn-lg" 
    type="button"
    (click)="sendRegisterCredentials()"
    [disabled]="!acceptTermsAndConditions||password.invalid||email.invalid||username.invalid"
    >
    Register
    </button>
</div>